<!-- Profile Button -->
<button (click)="toggleDropdown()" class="fixed top-4 right-4 z-50 bg-gray-200 p-2 rounded-full shadow-md">
  <img [src]="(user$ | async)?.photoURL || 'assets/images/default-avatar.png'"
    class="w-10 h-10 rounded-full object-cover border-2 border-white shadow-sm"
    alt="User Avatar">
</button>

<!-- Dropdown Menu (Full-width on Mobile) -->
<div *ngIf="dropdownOpen"
  class="absolute top-14 right-4 w-64 md:w-64 bg-white shadow-lg rounded-lg overflow-hidden border border-gray-200 z-50 md:right-0 md:mt-2">

  <div class="flex flex-col items-center p-4">
    <img [src]="(user$ | async)?.photoURL || 'assets/images/default-avatar.png'"
      class="w-16 h-16 rounded-full object-cover border-2 border-blue-500 shadow-md"
      alt="User Avatar">
    <p class="mt-2 text-lg font-semibold text-gray-800">{{ (user$ | async)?.displayName || 'User' }}</p>
    <p class="text-sm text-gray-600">{{ (user$ | async)?.email || 'No email' }}</p>
  </div>

  <hr>

  <div class="p-2">
    <button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Manage Account</button>
    <button (click)="logout()" class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Sign Out</button>
  </div>
</div>
  <!-- Spinner Overlay -->
  <div *ngIf="navigating" class="absolute inset-0 bg-white bg-opacity-70 flex flex-col items-center justify-center z-50">
    <div class="relative w-24 h-24 mb-4">
      <!-- Spinner Ring -->
      <div class="w-full h-full border-4 border-teal-500 border-t-transparent rounded-full animate-spin"></div>
  
      <!-- Centered Image -->
      <img src="assets/images/immune-system.png" alt="Loading..." 
           class="absolute inset-0 m-auto w-12 h-12 object-contain">
    </div>
  
    <!-- Loading Message -->
    <h1 class="text-teal-700 text-xl font-semibold tracking-wide animate-pulse">
      Logging out...
    </h1>
  </div>
